import Head from 'next/head';
import Link from "next/link";
import Layout from "@/components/Layout";
import ProductCard from "@/components/ProductCard";
import { useEffect, useState } from 'react';

export default function Home() {
  const [isZhMode, setIsZhMode] = useState(false);

  useEffect(() => {
    // 检查是否存在语言偏好存储
    const savedLang = localStorage.getItem('language');
    if (savedLang === 'zh') {
      document.body.classList.add('zh-mode');
      setIsZhMode(true);
    }

    // 添加语言切换功能
    const langSwitch = document.querySelector('.lang-switch');
    if (langSwitch) {
      langSwitch.addEventListener('click', () => {
        document.body.classList.toggle('zh-mode');
        const isZh = document.body.classList.contains('zh-mode');
        setIsZhMode(isZh);
        
        // 保存语言偏好
        localStorage.setItem('language', isZh ? 'zh' : 'en');
        
        // 更新显示的语言标签
        const langDisplay = document.getElementById('currentLang');
        if (langDisplay) {
          langDisplay.textContent = isZh ? 'ZH' : 'EN';
        }
      });
    }
  }, []);

  // 模拟特色产品数据
  const featuredProducts = [
    { id: 1, name: "科技积木套装", price: 299, image: "/images/product1.jpg" },
    { id: 2, name: "智能遥控机器人", price: 399, image: "/images/product2.jpg" },
    { id: 3, name: "益智拼图游戏", price: 99, image: "/images/product3.jpg" },
    { id: 4, name: "儿童绘画套装", price: 129, image: "/images/product4.jpg" },
  ];

  // 模拟分类数据
  const categories = [
    { id: 1, name: "科技玩具", image: "/images/category1.jpg" },
    { id: 2, name: "益智游戏", image: "/images/category2.jpg" },
    { id: 3, name: "艺术创作", image: "/images/category3.jpg" },
    { id: 4, name: "户外玩具", image: "/images/category4.jpg" },
  ];

  return (
    <>
      <Head>
        <meta charSet="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta
          name="description"
          content="Discover trendy and exclusive items from the USA at Haka Toyz. We ship worldwide."
        />
        <title>Haka Toyz - Trendy Goods from USA</title>
        {/* 首頁主要樣式 */}
        <style
          dangerouslySetInnerHTML={{
            __html:
              "\n        /* 語言顯示控制 */\n        .lang-zh {\n            display: none !important;\n        }\n        \n        body.zh-mode .lang-en {\n            display: none !important;\n        }\n        \n        body.zh-mode .lang-zh {\n            display: block !important;\n        }\n        \n        /* 針對行內元素的語言切換 */\n        span.lang-zh, a.lang-zh, button.lang-zh {\n            display: none !important;\n        }\n        \n        body.zh-mode span.lang-en, \n        body.zh-mode a.lang-en, \n        body.zh-mode button.lang-en {\n            display: none !important;\n        }\n        \n        body.zh-mode span.lang-zh, \n        body.zh-mode a.lang-zh, \n        body.zh-mode button.lang-zh {\n            display: inline-block !important;\n        }\n    "
          }}
        />
      </Head>

      <Layout>
        <div className="space-y-16">
          {/* 横幅区域 */}
          <div className="relative h-[500px] bg-gray-900 rounded-xl overflow-hidden">
            <div className="absolute inset-0 flex items-center pl-12 bg-gradient-to-r from-black to-transparent">
              <div className="max-w-md">
                <h1 className="text-4xl font-bold mb-4 neon-text-primary neon-pulse">探索奇妙的玩具世界</h1>
                <p className="mb-6 text-lg">高品质、有创意的玩具，激发孩子的想象力和创造力</p>
                <Link href="/products" className="neon-button py-3 px-8 rounded-full inline-block text-lg">
  立即选购
</Link>
              </div>
            </div>
          </div>

          {/* 特色产品区域 */}
          <div>
            <div className="flex justify-between items-center mb-8">
              <h2 className="text-3xl font-bold neon-text-secondary">特色产品</h2>
              <Link href="/products" className="neon-button py-3 px-8 rounded-full inline-block text-lg">
  立即选购
</Link>
            </div>
            <div className="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-6">
              {featuredProducts.map((product) => (
                <ProductCard
                  key={product.id}
                  id={product.id}
                  name={product.name}
                  price={product.price}
                  image={product.image}
                />
              ))}
            </div>
          </div>

          {/* 分类区域 */}
          <div>
            <h2 className="text-3xl font-bold mb-8 neon-text-secondary">浏览分类</h2>
            <div className="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-6">
              {categories.map((category) => (
                <Link href={`/categories/${category.id}`} key={category.id}>
                  <a className="group relative h-48 rounded-lg overflow-hidden bg-gray-900">
                    <div className="absolute inset-0 flex items-center justify-center bg-black/50 group-hover:bg-black/70 transition-all">
                      <h3 className="text-white text-xl font-bold group-hover:neon-text-primary transition-colors">
                        {category.name}
                      </h3>
                    </div>
                  </a>
                </Link>
              ))}
            </div>
          </div>

          {/* 促销信息 */}
          <div className="bg-gradient-to-r from-purple-900/30 to-blue-900/30 p-10 rounded-xl border border-purple-800/50">
            <div className="max-w-2xl mx-auto text-center">
              <h2 className="text-3xl font-bold neon-text-primary mb-4">订阅我们的电子邮件</h2>
              <p className="text-gray-300 mb-8">获取最新产品和优惠信息，新用户可享首单9折优惠！</p>
              <div className="flex flex-col sm:flex-row gap-3 justify-center">
                <input
                  type="email"
                  placeholder="请输入您的电子邮箱"
                  className="px-4 py-3 rounded-lg flex-1 max-w-md bg-gray-900 border border-gray-700 focus:outline-none focus:neon-border"
                />
                <button className="neon-button py-3 px-6 rounded-lg">
                  立即订阅
                </button>
              </div>
            </div>
          </div>
        </div>
      </Layout>
    </>
  );
} 
